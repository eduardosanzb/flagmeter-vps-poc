FROM node:20-alpine

# Install pnpm
RUN corepack enable && corepack prepare pnpm@9.15.0 --activate

WORKDIR /app

# Install dependencies and start dev server
# pnpm install is fast when lockfile hasn't changed
CMD ["sh", "-c", "pnpm install && cd apps/worker && pnpm dev"]
